Дисклеймер
Статья расчитана не тех,кто уже знает, что такое импорт, классы и модули.
Предполагается, что  Kivy уже установлен.


## Мир вашему дому!

В этой статье я расскажу вам о быстром и легком создании GUI на с помощью Kivy.


####Поехали!
Любое приложение Kivy состоит минимум из одного файла — основного скрипта.
Минимальный скрипт выглядит так:

from kivy.app import App
from kivy.uix.boxlayout import BoxLayout

class Root(BoxLayout):
	pass
		
class ExampleApp(App):
	def build(self):
	        return Root()

ExampleApp().run()

При запуске скрипта вы увидите черное окно, что будет означать, что приложение работает. Самое важное действие здесь - создание класса ExampleApp, который и есть наше приложение. 

Запуск kivy-приложения начинается с команды ExampleApp().run(),если ее удалить, то «кина не будет». 

Привет, мир!

А теперь прежде, чем вывести на экран «Привет, мир!», немного расскажу о Kivy.
Значительное количество времени написания приложений в других фреймворках — это создание интерфейса. Никто не любит писать одно и тоже по многу раз. Авторы Kivy решили эту проблему. Фреймворку дали собственный язык разметки, который превращает процесс разработки почти в чистое творчество и описание идей.
Чтобы использовать разметку нам нужен файл с расширением kv. Имя файла этого файла должно совпадать с именем класса приложения, для которого и создается разметка. В нашем случае, если класс называется ExampleApp, то файл разметки должен называться example.kv (регистр можно не соблюдать)
Итак, создайте рядом со скриптом файл example.kv и напишите в нём следующее:
<Root>:
    Label:
        text:'Привет, мир!'
Логика kv проста: указываешь виджет, а затем описываешь свойства виджета.
Свойства и методы конкретного виджета доступны в документации в разделе API. 

Важно: kv строит иерархию элементов через отступы. как Python, поэтому не смешиваайте  в одном документе отступы через пробелы с табуляцией. Рекомендуется делать 4 пробела на каждый новый уровень дерева.
Построение интерфейса всегда начинается с обращения к корневому виджету — Root. Видите имя в фигурных скобках — это корневой виджет.(Есть исключение из правила, но об этом напишем в другой статье). Здесь мы помещаем на корневой виджет объект Label и задаем текст лейбла. 
Конечно, Kivy позволяет добавлять виджеты по-старинке,то бишь в скрипте, через функции. Однако, каждый виджет - это класс, а это значит, что его надо будет импортировать и объявить, тогда как разметка всё это делает за нас. И если элементов нужно много, то пренебрегать разметкой глупо.
А теперь запускаем скрипт, читаем наш «привет» в центре черного окна и готовимся идти дальше.

Добавляем интерактив

Допустим, теперь мы хотим, чтобы программа писала «Привет, %user_name% !».
Как уже сказано, логика kv проста: пиши виджет, а потом свойства.
Для начала, нужно, чтобы пользователь увидел приглашение к вводу текста. Для этого открываем example.kv и добавляем новую надпись:

<Root>:
    Label:
        text:'Введите своё имя'
    Label:
        text:'Привет, мир!'

Запускаем скрипт и видим, что надписи расположились друг за другом по горизонтали. Непривычно, исправляем. Root — это тоже виджет, а значит под именем виджета можно указывать не только дочерние элементы, но и свойства самого виджета.
Одно из таких свойств BoxLayout — ориентация содержимого. Поэтому:

<Root>:
    orientation:'vertical'
    …
Теперь добавим ввод текста:

<Root>:
    orientation:'vertical'
    Label:
        text:'Введите своё имя'
    TextInput:
    Label:
        text:'Привет, мир!'

Итак, теперь мы можем вводить текст,но это ничего не меняет. Так как мы хотим, чтобы текст из формы попал на второй лейбл, мы должны присвоить форме идентификатор.  Идентификатор — значение поле id. Назначать id можно всем без исключения элементам в kv. Добавим это поле в форму:
...
TextInput:
    id: form
...

Теперь, когда нам нужен текст из формы, то достаточно написать ее индентификатор, а потом вызвать свойство text:

...
Label:
    text: form.text
…

Запускаем и видим, что всё, что вводится в форму, тут же появляется в поле ниже.
Но kv — не простой язык разметки. Например, он может обрабатывать строки, как это делает сам Python:
	
Label:
    text:'Привет, '+form.text+'!'

Выглядит замечательно!

Больше контроля

А теперь мы хотим, чтобы надпись менялась не в момент ввода, а, например, по нажатию кнопки. Чтобы обратиться к надписи и изменить ее текст, ей нужно присвоить идентификатор.

Label:
    id:field
    text:'Привет, '+form.text+'!'

Теперь надо добавить кнопку:
...
Label:
    text:'Привет, '+form.text+'!'
Button:
    text: 'OK'

Чтобы назначить кнопке действие, мы объявим событие для кнопки и реакцию на него:

Button:
     text: 'OK'
     on_press:
        field.text = 'Привет, '+form.text+'!'

Запомните: чтобы передать значение в поле виджета внутри события или свойства надо использовать операцию присваивания «=» , а не двоеточие:
on_press:
        field.text = 'Привет, '+form.text+'!'

Как понять где тут событие? Очень просто. Событие — это поле, которое начинается с символов «on_». 
Вернемся к файлу example.kv. Теперь он выглядит так:

<Root>:
    orientation:'vertical'
    Label:
        text:'Введите своё имя'
    TextInput:
        id:form
    Label:
        id:field
    Button:
        text: 'OK'
        on_press:
            field.text = 'Привет, '+form.text+'!'

Всё! Наше маленькое приложение готово. Можем им пользоваться.

Финал
Конечно, это малая часть того, что можно рассказать о фреймворке. Здесь не затронуты такие вопросы как форматирование текста, внешний вид элементов, их взаимное расположение, да и сама библиотека элементов, но, думаю, того что было в статье достаточно, чтобы показать, что разработка на Kivy — это легко и интересно. До новых встреч в следующих статьях!
